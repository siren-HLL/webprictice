<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, usercalable=no">
		<style type="text/css">
			div{
				width: 100px;
				height: 100px;
				background-color: #0086B3;
				border-radius: 50%;
				position: absolute;/*一定是脱离文档流的*/
				left: 10px;
				right: 20px;
			}
		</style>
		<title>拖拽</title>
	</head>
	<body>
		<div id="dv">
		</div>
		<script type="text/javascript">
			//获取元素
			var dv = document.getElementById('dv');
			var x = 0;
			var y = 0;
			var l = 0;
			var t = 0;
			var isDown = false;
			//鼠标按下事件
			dv.onmousedown = function(e) {
			    //获取x坐标和y坐标
			    x = e.clientX;
			    y = e.clientY;
			
			    //获取左部和顶部的偏移量
			   // l = dv.offsetLeft;//offsetWidth: 为元素的width+元素的padding+边框的宽度
			    //t = dv.offsetTop;
			    //开关打开
				console.log("当前："+x,y,t,l);
			    isDown = true;
			    //设置样式  
			    dv.style.cursor = 'move';
			}
			//鼠标移动
			window.onmousemove = function(e) {
			    if (isDown == false) {
			        return;
			    }
			    //获取x和y
			    var nx = e.clientX;
			    var ny = e.clientY;
			    //计算移动后的左偏移量和顶部的偏移量
			    var nl = nx - (x - l);
			    var nt = ny - (y - t);
			
			    dv.style.left = nl + 'px';
			    dv.style.top = nt + 'px';
				console.log("之后："+nx,ny,nt,nl);
			}
			//鼠标抬起事件
			dv.onmouseup = function() {
			    //开关关闭
			    isDown = false;
			    dv.style.cursor = 'default';
			}
		</script>
	</body>
</html>
